# DeepAgents CLI 配置示例
# 将此文件复制为 .env 并配置您的设置

# ========== OpenAI / LLM 配置 ==========
# OpenAI API 密钥（或兼容的 API 密钥）
# 支持 OpenAI、DeepSeek、通义千问等兼容 OpenAI API 的服务
OPENAI_API_KEY=your-api-key-here

# 模型名称
# 示例：gpt-4, gpt-3.5-turbo, deepseek-chat, qwen-turbo 等
OPENAI_MODEL=gpt-4

# API 基础 URL（可选）
# 如果使用 OpenAI 官方服务，可以不设置
# 如果使用其他兼容服务（如 DeepSeek、自建服务），需要设置
# 示例：https://api.deepseek.com/v1
# OPENAI_BASE_URL=https://api.openai.com/v1

# ========== LangSmith 追踪配置（可选）==========
# 启用 LangSmith 追踪以监控和调试 Agent 行为
# 设置为 true 启用，false 或不设置则禁用
LANGSMITH_TRACING=true

# LangSmith API 端点
LANGSMITH_ENDPOINT=https://api.smith.langchain.com

# LangSmith API 密钥
# 在 https://smith.langchain.com/ 获取
LANGSMITH_API_KEY=your-langsmith-api-key

# LangSmith 项目名称
# 用于组织和区分不同的 Agent 运行记录
LANGSMITH_PROJECT=deepagents-project

# ========== Tavily 搜索 API 配置（可选）==========
# Tavily 提供网络搜索能力，Agent 可以搜索互联网信息
# 在 https://tavily.com/ 获取 API 密钥
TAVILY_API_KEY=your-tavily-api-key

# ========== AutoGLM 配置（Android 设备自动化）==========
# 启用/禁用 AutoGLM 中间件
# 设置为 true 启用 Android 设备自动化功能
AUTOGLM_ENABLED=true

# ========== AutoGLM 视觉模型配置 ==========
# 视觉-语言模型 API 基础 URL（例如 vLLM 服务器或智谱 AI）
# 当 AUTOGLM_ENABLED=true 时必须设置
# 本地部署示例：http://localhost:8000/v1
# 智谱 AI 示例：https://open.bigmodel.cn/api/paas/v4
AUTOGLM_VISION_MODEL_URL=http://localhost:8000/v1

# 用于 GUI 理解的视觉模型名称
# 本地模型：autoglm-phone-9b (AutoGLM-Phone-9B 模型)
# 智谱 AI：autoglm-phone
AUTOGLM_VISION_MODEL_NAME=autoglm-phone-9b

# 视觉模型 API 密钥
# 本地部署使用 "EMPTY"
# 智谱 AI 使用您的 API 密钥
AUTOGLM_VISION_API_KEY=EMPTY

# ========== AutoGLM 设备配置 ==========
# 用于自动化的 ADB 设备 ID
# 如果不设置或留空，将自动使用第一个连接的设备
# 通过运行 adb devices 查看设备 ID
# 示例：
#   - USB 设备：ABCD1234567890
#   - WiFi 设备：192.168.1.100:5555
#   - 模拟器：emulator-5554
# AUTOGLM_DEVICE_ID=

# ========== AutoGLM 语言配置 ==========
# 系统提示词和指令的语言
# 选项：
#   - "zh"（中文，完整功能集，支持 18 种动作类型和 18 条执行规则）
#   - "en"（英文，简化版，支持 7 种基本动作类型）
# 默认值：zh
AUTOGLM_LANG=zh

# ========== AutoGLM 任务执行配置 ==========
# 自主手机任务的最大步骤数
# 每个步骤包括：截屏 → 视觉模型分析 → 动作执行
# 默认值：100
# 建议值：根据任务复杂度设置 50-200
AUTOGLM_MAX_STEPS=100

# ========== AutoGLM 工具暴露配置 ==========
# 是否向主 Agent 暴露底层 ADB 工具
# 当设置为 true 时，Agent 可以直接访问：
#   - phone_tap：点击坐标
#   - phone_swipe：滑动手势
#   - phone_type：输入文本
#   - phone_screenshot：截取屏幕
#   - phone_back：按返回键
#   - phone_home：按主屏幕键
#   - phone_launch：按名称启动应用
# 当设置为 false 时，只有高级 phone_task 工具可用
# 默认值：false（大多数情况下推荐使用）
AUTOGLM_EXPOSE_LOW_LEVEL_TOOLS=false

# ========== AutoGLM 调试配置 ==========
# 启用详细日志记录以进行调试
# 当设置为 true 时，将打印详细信息：
#   - 任务执行的每个步骤
#   - 模型响应和思考过程
#   - 执行的动作及其结果
#   - 截图路径
# 默认值：false
AUTOGLM_VERBOSE=false

# ========== 快速开始指南 ==========
# 1. 安装依赖：
#    uv pip install -e ".[autoglm]"
#    或使用 pip：
#    pip install -e ".[autoglm]"
#
# 2. 配置基础 LLM（OpenAI 或兼容服务）：
#    - 设置 OPENAI_API_KEY
#    - 设置 OPENAI_MODEL（例如 gpt-4, deepseek-chat）
#    - 如果使用非 OpenAI 服务，设置 OPENAI_BASE_URL
#
# 3. （可选）配置 LangSmith 追踪：
#    - 在 https://smith.langchain.com/ 注册账号
#    - 获取 API 密钥并设置 LANGSMITH_API_KEY
#    - 设置 LANGSMITH_TRACING=true
#
# 4. （可选）配置 Tavily 搜索：
#    - 在 https://tavily.com/ 获取 API 密钥
#    - 设置 TAVILY_API_KEY
#
# ========== AutoGLM 快速开始（Android 自动化）==========
# 5. 安装 ADB 工具：
#    macOS:     brew install android-platform-tools
#    Ubuntu:    sudo apt-get install android-tools-adb
#    Windows:   从 https://developer.android.com/studio/releases/platform-tools 下载
#
# 6. 连接 Android 设备：
#    - 在设备上启用 USB 调试（设置 → 关于手机 → 连续点击 7 次版本号）
#    - 设置 → 开发者选项 → 启用 USB 调试
#    - 通过 USB 连接设备
#    - 运行：adb devices（应该能看到您的设备）
#
# 7. 安装 ADB Keyboard（文本输入必需）：
#    - 下载：https://github.com/senzhk/ADBKeyBoard
#    - 安装：adb install -r ADBKeyboard.apk
#    - 在设备设置中启用：设置 → 语言和输入法 → ADB Keyboard
#
# 8. 配置视觉模型：
#    方案 A - 本地 vLLM 部署（推荐）：
#      python3 -m vllm.entrypoints.openai.api_server \
#        --served-model-name autoglm-phone-9b \
#        --allowed-local-media-path / \
#        --mm-encoder-tp-mode data \
#        --mm_processor_cache_type shm \
#        --mm_processor_kwargs '{"max_pixels":5000000}' \
#        --max-model-len 25480 \
#        --chat-template-content-format string \
#        --limit-mm-per-prompt '{"image":10}' \
#        --model zai-org/AutoGLM-Phone-9B \
#        --port 8000
#
#    方案 B - 智谱 AI 云端 API：
#      - 在 https://open.bigmodel.cn/ 注册并获取 API 密钥
#      - 设置 AUTOGLM_VISION_MODEL_URL=https://open.bigmodel.cn/api/paas/v4
#      - 设置 AUTOGLM_VISION_MODEL_NAME=autoglm-phone
#      - 设置 AUTOGLM_VISION_API_KEY=您的密钥
#
# 9. 配置此 .env 文件：
#    - 将 .env.example 复制为 .env
#    - 设置 AUTOGLM_ENABLED=true
#    - 设置 AUTOGLM_VISION_MODEL_URL 为您的 vLLM 服务器或云端 API
#    - 如果有多个设备，可选设置 AUTOGLM_DEVICE_ID
#
# 10. 运行 deepagents-cli：
#     deepagents
#
# 11. 测试 AutoGLM：
#     用户输入："使用 phone_task 打开微信"
#     Agent 将自动使用 phone_task 工具打开微信应用

# ========== 使用示例场景 ==========
# 基础任务：
#   "打开设置应用"
#
# 复杂任务：
#   "在地图应用中搜索'咖啡店'，找一个评分高的"
#
# 多步骤任务：
#   "打开微信，找到与小明的聊天，发送消息'你好'"
#
# 电商任务：
#   "打开美团，搜索'寿司店'，把评分最高的加入收藏"
#
# 信息查询任务：
#   "打开抖音，搜索'北京旅游攻略'，观看第一个视频"

# ========== 故障排除 ==========
# 找不到设备：
#   - 运行：adb kill-server && adb start-server
#   - 检查 USB 线缆和调试设置
#   - 尝试：adb devices -l
#
# 文本输入不工作：
#   - 安装 ADB Keyboard：https://github.com/senzhk/ADBKeyBoard
#   - 在设备设置中启用它
#   - 检查：adb shell ime list -s
#
# 视觉模型连接失败：
#   - 验证 AUTOGLM_VISION_MODEL_URL 是否正确
#   - 检查 vLLM 服务器是否运行：curl $AUTOGLM_VISION_MODEL_URL/health
#   - 检查防火墙设置
#   - 如果使用云端 API，检查 API 密钥是否正确
#
# 任务超时或失败：
#   - 增加 AUTOGLM_MAX_STEPS 的值
#   - 启用 AUTOGLM_VERBOSE=true 进行调试
#   - 确保设备屏幕开启且未锁定
#
# WiFi ADB 频繁断开：
#   - 使用 USB 连接以获得稳定性
#   - 或：adb tcpip 5555 && adb connect <设备IP>:5555
#
# LLM API 调用失败：
#   - 检查 OPENAI_API_KEY 是否正确
#   - 检查 OPENAI_BASE_URL 是否可访问
#   - 检查网络连接和代理设置
#   - 验证账户余额是否充足
